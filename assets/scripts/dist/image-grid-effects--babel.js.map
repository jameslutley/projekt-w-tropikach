{"version":3,"sources":["../src/image-grid-effects--babel.js"],"names":["window","throttle","fn","delay","allowSample","e","setTimeout","nextSibling","el","nodeType","extend","a","b","key","hasOwnProperty","support","transitions","Modernizr","csstransitions","transEndEventName","prefixed","onEndTransition","callback","onEndCallbackFn","ev","target","removeEventListener","call","addEventListener","GridFx","constructor","options","gridEl","items","slice","querySelectorAll","previewEl","isExpanded","isAnimating","closeCtrl","querySelector","previewDescriptionEl","_init","onInit","self","imagesLoaded","Masonry","itemSelector","isFitWidth","classList","add","_initEvents","_setOriginal","_setClone","clickEvent","ontouchstart","forEach","item","touchend","preventDefault","_openItem","touchmove","manageTouch","_closeItem","onResize","gridImg","gridImgOffset","getBoundingClientRect","current","indexOf","getAttribute","onOpenItem","src","width","offsetWidth","height","offsetHeight","left","top","win","_getWinSize","originalSizeArr","split","originalSize","dx","imgPosition","x","Math","abs","dy","y","z","min","pagemargin","cloneImg","style","WebkitTransform","transform","descriptionEl","innerHTML","onExpand","originalImg","opacity","document","createElement","className","maxWidth","parseInt","maxHeight","appendChild","setAttribute","settings","gridItem","remove","onCloseItem","documentElement","clientWidth","innerHeight","prototype","instance","innerWidth","floor","random","WebkitTransition","transition","elOffset","elSize"],"mappings":"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","file":"image-grid-effects--babel.js","sourcesContent":["/**\n * main.js\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n *\n * Copyright 2015, Codrops\n * http://www.codrops.com\n */;\n((window => {\n    const support = {\n        transitions: Modernizr.csstransitions\n    };\n\n    // transition end event name\n    const transEndEventNames = {\n        'WebkitTransition': 'webkitTransitionEnd',\n        'MozTransition': 'transitionend',\n        'OTransition': 'oTransitionEnd',\n        'msTransition': 'MSTransitionEnd',\n        'transition': 'transitionend'\n    };\n\n    const transEndEventName = transEndEventNames[Modernizr.prefixed('transition')];\n\n    const onEndTransition = (el, callback) => {\n        const onEndCallbackFn = function(ev) {\n            if (support.transitions) {\n                if (ev.target != this) return;\n                this.removeEventListener(transEndEventName, onEndCallbackFn);\n            }\n            if (callback && typeof callback === 'function') {\n                callback.call(this);\n            }\n        };\n        if (support.transitions) {\n            el.addEventListener(transEndEventName, onEndCallbackFn);\n        } else {\n            onEndCallbackFn();\n        }\n    };\n\n    /**\n     * some helper functions\n     */\n    function throttle(fn, delay) {\n        let allowSample = true;\n\n        return e => {\n            if (allowSample) {\n                allowSample = false;\n                setTimeout(() => {\n                    allowSample = true;\n                }, delay);\n                fn(e);\n            }\n        };\n    }\n\n    function nextSibling(el) {\n        let nextSibling = el.nextSibling;\n        while (nextSibling && nextSibling.nodeType != 1) {\n            nextSibling = nextSibling.nextSibling\n        }\n        return nextSibling;\n    }\n\n    function extend(a, b) {\n        for (const key in b) {\n            if (b.hasOwnProperty(key)) {\n                a[key] = b[key];\n            }\n        }\n        return a;\n    }\n\n    /**\n     * GridFx obj\n     */\n    class GridFx {\n        constructor(el, options) {\n            this.gridEl = el;\n            this.options = extend({}, this.options);\n            extend(this.options, options);\n\n            this.items = [].slice.call(this.gridEl.querySelectorAll('.c-img-grid__item'));\n            this.previewEl = nextSibling(this.gridEl);\n            this.isExpanded = false;\n            this.isAnimating = false;\n            this.closeCtrl = this.previewEl.querySelector('button.c-img-grid__action--close');\n            this.previewDescriptionEl = this.previewEl.querySelector('.c-img-grid__description--preview');\n\n            this._init();\n        }\n\n        _init() {\n            // callback\n            this.options.onInit(this);\n\n            const self = this;\n            // init masonry after all images are loaded\n            imagesLoaded(this.gridEl, () => {\n                // initialize masonry\n                new Masonry(self.gridEl, {\n                    itemSelector: '.c-img-grid__item',\n                    isFitWidth: true\n                });\n                // show grid after all images (thumbs) are loaded\n                // classie.add(self.gridEl, 'grid--loaded');\n                self.gridEl.classList.add('c-img-grid__grid--loaded');\n                // init/bind events\n                self._initEvents();\n                // create the large image and append it to the DOM\n                self._setOriginal();\n                // create the clone image and append it to the DOM\n                self._setClone();\n            });\n        }\n\n        /**\n         * initialize/bind events\n         */\n        _initEvents() {\n            const self = this;\n            const clickEvent = (document.ontouchstart !== null ? 'click' : 'touchstart');\n\n            this.items.forEach(item => {\n                const touchend = ev => {\n                    ev.preventDefault();\n                    self._openItem(ev, item);\n                    item.removeEventListener('touchend', touchend);\n                };\n\n                const touchmove = ev => {\n                    item.removeEventListener('touchend', touchend);\n                };\n\n                const manageTouch = () => {\n                    item.addEventListener('touchend', touchend);\n                    item.addEventListener('touchmove', touchmove);\n                };\n\n                item.addEventListener(clickEvent, ev => {\n                    if (clickEvent === 'click') {\n                        ev.preventDefault();\n                        self._openItem(ev, item);\n                    } else {\n                        manageTouch();\n                    }\n                });\n            });\n\n            // close expanded image\n            this.closeCtrl.addEventListener('click', () => {\n                self._closeItem();\n            });\n\n            window.addEventListener('resize', throttle(ev => {\n                // callback\n                self.options.onResize(self);\n            }, 10));\n        }\n\n        /**\n         * open a grid item\n         */\n        _openItem(ev, item) {\n            if (this.isAnimating || this.isExpanded) return;\n            this.isAnimating = true;\n            this.isExpanded = true;\n\n            // item's image\n            const gridImg = item.querySelector('img');\n\n            const gridImgOffset = gridImg.getBoundingClientRect();\n\n            // index of current item\n            this.current = this.items.indexOf(item);\n\n            // set the src of the original image element (large image)\n            this._setOriginal(item.querySelector('a').getAttribute('href'));\n\n            // callback\n            this.options.onOpenItem(this, item);\n\n            // set the clone image\n            this._setClone(gridImg.src, {\n                width: gridImg.offsetWidth,\n                height: gridImg.offsetHeight,\n                left: gridImgOffset.left,\n                top: gridImgOffset.top\n            });\n\n            // hide original grid item\n            // classie.add(item, 'grid__item--current');\n            item.classList.add('c-img-grid__item--current');\n\n            // calculate the transform value for the clone to animate to the full image view\n            const win = this._getWinSize();\n\n            const originalSizeArr = item.getAttribute('data-size').split('x');\n\n            const originalSize = {\n                width: originalSizeArr[0],\n                height: originalSizeArr[1]\n            };\n\n            const dx = ((this.options.imgPosition.x > 0 ? 1 - Math.abs(this.options.imgPosition.x) : Math.abs(this.options.imgPosition.x)) * win.width + this.options.imgPosition.x * win.width / 2) - gridImgOffset.left - 0.5 * gridImg.offsetWidth;\n            const dy = ((this.options.imgPosition.y > 0 ? 1 - Math.abs(this.options.imgPosition.y) : Math.abs(this.options.imgPosition.y)) * win.height + this.options.imgPosition.y * win.height / 2) - gridImgOffset.top - 0.5 * gridImg.offsetHeight;\n            const z = Math.min(Math.min(win.width * Math.abs(this.options.imgPosition.x) - this.options.pagemargin, originalSize.width - this.options.pagemargin) / gridImg.offsetWidth, Math.min(win.height * Math.abs(this.options.imgPosition.y) - this.options.pagemargin, originalSize.height - this.options.pagemargin) / gridImg.offsetHeight);\n\n            // apply transform to the clone\n            this.cloneImg.style.WebkitTransform = `translate3d(${dx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n            this.cloneImg.style.transform = `translate3d(${dx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n\n            // add the description if any\n            const descriptionEl = item.querySelector('.c-img-grid__description');\n            if (descriptionEl) {\n                this.previewDescriptionEl.innerHTML = descriptionEl.innerHTML;\n            }\n\n            const self = this;\n            setTimeout(() => {\n                // controls the elements inside the expanded view\n                // classie.add(self.previewEl, 'preview--open');\n                self.previewEl.classList.add('preview--open');\n                // callback\n                self.options.onExpand();\n            }, 0);\n\n            // after the clone animates..\n            onEndTransition(this.cloneImg, () => {\n                // when the original/large image is loaded..\n                imagesLoaded(self.originalImg, () => {\n                    // close button just gets shown after the large image gets loaded\n                    // classie.add(self.previewEl, 'preview--image-loaded');\n                    self.previewEl.classList.add('c-img-grid__preview--image-loaded');\n                    // animate the opacity to 1\n                    self.originalImg.style.opacity = 1;\n                    // and once that's done..\n                    onEndTransition(self.originalImg, () => {\n                        // reset cloneImg\n                        self.cloneImg.style.opacity = 0;\n                        self.cloneImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n                        self.cloneImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n                        self.isAnimating = false;\n                    });\n\n                });\n            });\n        }\n\n        /**\n         * create/set the original/large image element\n         */\n        _setOriginal(src) {\n            if (!src) {\n                this.originalImg = document.createElement('img');\n                this.originalImg.className = 'original';\n                this.originalImg.style.opacity = 0;\n                this.originalImg.style.maxWidth = `calc(${parseInt(Math.abs(this.options.imgPosition.x) * 100)}vw - ${this.options.pagemargin}px)`;\n                this.originalImg.style.maxHeight = `calc(${parseInt(Math.abs(this.options.imgPosition.y) * 100)}vh - ${this.options.pagemargin}px)`;\n                // need it because of firefox\n                this.originalImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n                this.originalImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n                src = '';\n                this.previewEl.appendChild(this.originalImg);\n            }\n\n            this.originalImg.setAttribute('src', src);\n        }\n\n        /**\n         * create/set the clone image element\n         */\n        _setClone(src, settings) {\n            if (!src) {\n                this.cloneImg = document.createElement('img');\n                this.cloneImg.className = 'clone';\n                src = '';\n                this.cloneImg.style.opacity = 0;\n                this.previewEl.appendChild(this.cloneImg);\n            } else {\n                this.cloneImg.style.opacity = 1;\n                // set top/left/width/height of grid item's image to the clone\n                this.cloneImg.style.width = `${settings.width}px`;\n                this.cloneImg.style.height = `${settings.height}px`;\n                this.cloneImg.style.top = `${settings.top}px`;\n                this.cloneImg.style.left = `${settings.left}px`;\n            }\n\n            this.cloneImg.setAttribute('src', src);\n        }\n\n        /**\n         * closes the original/large image view\n         */\n        _closeItem() {\n            if (!this.isExpanded || this.isAnimating) return;\n            this.isExpanded = false;\n            this.isAnimating = true;\n\n            // the grid item's image and its offset\n            const gridItem = this.items[this.current];\n\n            const gridImg = gridItem.querySelector('img');\n            const gridImgOffset = gridImg.getBoundingClientRect();\n            const self = this;\n\n            // classie.remove(this.previewEl, 'preview--open');\n            this.previewEl.classList.remove('c-img-grid__preview--open');\n            // classie.remove(this.previewEl, 'preview--image-loaded');\n            this.previewEl.classList.remove('c-img-grid__preview--image-loaded');\n\n            // callback\n            this.options.onCloseItem(this, gridItem);\n\n            // large image will animate back to the position of its grid's item\n            // classie.add(this.originalImg, 'animate');\n            this.originalImg.classList.add('animate');\n\n            // set the transform to the original/large image\n            const win = this._getWinSize();\n\n            const dx = gridImgOffset.left + gridImg.offsetWidth / 2 - ((this.options.imgPosition.x > 0 ? 1 - Math.abs(this.options.imgPosition.x) : Math.abs(this.options.imgPosition.x)) * win.width + this.options.imgPosition.x * win.width / 2);\n            const dy = gridImgOffset.top + gridImg.offsetHeight / 2 - ((this.options.imgPosition.y > 0 ? 1 - Math.abs(this.options.imgPosition.y) : Math.abs(this.options.imgPosition.y)) * win.height + this.options.imgPosition.y * win.height / 2);\n            const z = gridImg.offsetWidth / this.originalImg.offsetWidth;\n\n            this.originalImg.style.WebkitTransform = `translate3d(${dx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n            this.originalImg.style.transform = `translate3d(${dx}px, ${dy}px, 0) scale3d(${z}, ${z}, 1)`;\n\n            // once that's done..\n            onEndTransition(this.originalImg, () => {\n                // clear description\n                self.previewDescriptionEl.innerHTML = '';\n\n                // show original grid item\n                // classie.remove(gridItem, 'grid__item--current');\n                gridItem.classList.remove('c-img-grid__item--current');\n\n                // fade out the original image\n                setTimeout(() => {\n                    self.originalImg.style.opacity = 0;\n                }, 60);\n\n                // and after that\n                onEndTransition(self.originalImg, () => {\n                    // reset original/large image\n                    // classie.remove(self.originalImg, 'animate');\n                    self.originalImg.classList.remove('animate');\n                    self.originalImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n                    self.originalImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n                    self.isAnimating = false;\n                });\n            });\n        }\n\n        /**\n         * gets the window sizes\n         */\n        _getWinSize() {\n            return {\n                width: document.documentElement.clientWidth,\n                height: window.innerHeight\n            };\n        }\n    }\n\n    /**\n     * options\n     */\n    GridFx.prototype.options = {\n        pagemargin: 0,\n        // x and y can have values from 0 to 1 (percentage). If negative then it means the alignment is left and/or top rather than right and/or bottom\n        // so, as an example, if we want our large image to be positioned vertically on 25% of the screen and centered horizontally the values would be x:1,y:-0.25\n        imgPosition: {\n            x: 1,\n            y: 1\n        },\n        onInit(instance) {\n            return false;\n        },\n        onResize(instance) {\n            return false;\n        },\n        onOpenItem(instance, item) {\n            return false;\n        },\n        onCloseItem(instance, item) {\n            return false;\n        },\n        onExpand() {\n            return false;\n        }\n    }\n\n    window.GridFx = GridFx;\n}))(window);\n\n((() => {\n    const support = { transitions: Modernizr.csstransitions };\n\n    const // transition end event name\n    transEndEventNames = { 'WebkitTransition': 'webkitTransitionEnd', 'MozTransition': 'transitionend', 'OTransition': 'oTransitionEnd', 'msTransition': 'MSTransitionEnd', 'transition': 'transitionend' };\n\n    const transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ];\n\n    const onEndTransition = (el, callback) => {\n        const onEndCallbackFn = function( ev ) {\n            if( support.transitions ) {\n                if( ev.target != this ) return;\n                this.removeEventListener( transEndEventName, onEndCallbackFn );\n            }\n            if( callback && typeof callback === 'function' ) { callback.call(this); }\n        };\n        if( support.transitions ) {\n            el.addEventListener( transEndEventName, onEndCallbackFn );\n        }\n        else {\n            onEndCallbackFn();\n        }\n    };\n\n    new GridFx(document.querySelector('.img-grid__wrap'), {\n        imgPosition : {\n            x : 1,\n            y : -0.75\n        },\n        onOpenItem(instance, item) {\n            const win = {width: window.innerWidth, height: window.innerHeight};\n            instance.items.forEach(el => {\n                if(item != el) {\n                    const delay = Math.floor(Math.random() * 130);\n                    el.style.WebkitTransition = `opacity .5s ${delay}ms cubic-bezier(.7,0,.3,1), -webkit-transform .5s ${delay}ms cubic-bezier(.7,0,.3,1)`;\n                    el.style.transition = `opacity .5s ${delay}ms cubic-bezier(.7,0,.3,1), transform .5s ${delay}ms cubic-bezier(.7,0,.3,1)`;\n\n                    const elOffset = el.getBoundingClientRect();\n                    const elSize = {width : el.offsetWidth, height : el.offsetHeight};\n                    el.style.WebkitTransform = `translate3d(${win.width/2 - elOffset.left - elSize.width/2}px,${win.height - elOffset.top - elSize.height/2}px,0) scale3d(0,0,1)`;\n                    el.style.transform = `translate3d(${win.width/2 - elOffset.left - elSize.width/2}px,${win.height - elOffset.top - elSize.height/2}px,0) scale3d(0,0,1)`;\n                    el.style.opacity = 0;\n                }\n            });\n        },\n        onCloseItem(instance, item) {\n            instance.items.forEach(el => {\n                if(item != el) {\n                    el.style.WebkitTransition = 'opacity .3s, -webkit-transform .3s';\n                    el.style.transition = 'opacity .3s, transform .3s';\n                    el.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n                    el.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n                    el.style.opacity = 1;\n                    onEndTransition(el, () => {\n                        el.style.transition = 'none';\n                        el.style.WebkitTransform = 'none';\n                    });\n                }\n            });\n        }\n    });\n}))();\n"]}