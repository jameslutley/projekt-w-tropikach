(function(c){'use strict';/**
     * some helper functions
     */function d(l,m){var n=!0;return function(o){n&&(n=!1,setTimeout(function(){n=!0},m),l(o))}}function f(l){for(var m=l.nextSibling;m&&1!=m.nodeType;)m=m.nextSibling;return m}function g(l,m){for(var n in m)m.hasOwnProperty(n)&&(l[n]=m[n]);return l}/**
     * GridFx obj
     */function h(l,m){this.gridEl=l,this.options=g({},this.options),g(this.options,m),this.items=[].slice.call(this.gridEl.querySelectorAll('.grid__item')),this.previewEl=f(this.gridEl),this.isExpanded=!1,this.isAnimating=!1,this.closeCtrl=this.previewEl.querySelector('button.action--close'),this.previewDescriptionEl=this.previewEl.querySelector('.description--preview'),this._init()}/**
     * options
     */var i={transitions:Modernizr.csstransitions}// transition end event name
,j={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd',msTransition:'MSTransitionEnd',transition:'transitionend'}[Modernizr.prefixed('transition')],k=function(l,m){var n=function(o){if(i.transitions){if(o.target!=this)return;this.removeEventListener(j,n)}m&&'function'==typeof m&&m.call(this)};i.transitions?l.addEventListener(j,n):n()};h.prototype.options={pagemargin:0,// x and y can have values from 0 to 1 (percentage). If negative then it means the alignment is left and/or top rather than right and/or bottom
// so, as an example, if we want our large image to be positioned vertically on 25% of the screen and centered horizontally the values would be x:1,y:-0.25
imgPosition:{x:1,y:1},onInit:function(){return!1},onResize:function(){return!1},onOpenItem:function(){return!1},onCloseItem:function(){return!1},onExpand:function(){return!1}},h.prototype._init=function(){this.options.onInit(this);var l=this;// init masonry after all images are loaded
imagesLoaded(this.gridEl,function(){l.gridEl.classList.add('grid--loaded'),l._initEvents(),l._setOriginal(),l._setClone()})},h.prototype._initEvents=function(){var l=this,m=null===document.ontouchstart?'touchstart':'click';this.items.forEach(function(n){var o=function(r){r.preventDefault(),l._openItem(r,n),n.removeEventListener('touchend',o)},p=function(){n.removeEventListener('touchend',o)},q=function(){n.addEventListener('touchend',o),n.addEventListener('touchmove',p)};n.addEventListener(m,function(r){'click'==m?(r.preventDefault(),l._openItem(r,n)):q()})}),this.closeCtrl.addEventListener('click',function(){l._closeItem()}),c.addEventListener('resize',d(function(){l.options.onResize(l)},10))},h.prototype._openItem=function(l,m){if(!(this.isAnimating||this.isExpanded)){this.isAnimating=!0,this.isExpanded=!0;// item's image
var n=m.querySelector('img'),o=n.getBoundingClientRect();// index of current item
this.current=this.items.indexOf(m),this._setOriginal(m.querySelector('a').getAttribute('href')),this.options.onOpenItem(this,m),this._setClone(n.src,{width:n.offsetWidth,height:n.offsetHeight,left:o.left,top:o.top}),m.classList.add('grid__item--current');// calculate the transform value for the clone to animate to the full image view
var p=this._getWinSize(),q=m.getAttribute('data-size').split('x'),r={width:q[0],height:q[1]},s=(0<this.options.imgPosition.x?1-Math.abs(this.options.imgPosition.x):Math.abs(this.options.imgPosition.x))*p.width+this.options.imgPosition.x*p.width/2-o.left-0.5*n.offsetWidth,t=(0<this.options.imgPosition.y?1-Math.abs(this.options.imgPosition.y):Math.abs(this.options.imgPosition.y))*p.height+this.options.imgPosition.y*p.height/2-o.top-0.5*n.offsetHeight,u=Math.min(Math.min(p.width*Math.abs(this.options.imgPosition.x)-this.options.pagemargin,r.width-this.options.pagemargin)/n.offsetWidth,Math.min(p.height*Math.abs(this.options.imgPosition.y)-this.options.pagemargin,r.height-this.options.pagemargin)/n.offsetHeight);// apply transform to the clone
this.cloneImg.style.WebkitTransform='translate3d('+s+'px, '+t+'px, 0) scale3d('+u+', '+u+', 1)',this.cloneImg.style.transform='translate3d('+s+'px, '+t+'px, 0) scale3d('+u+', '+u+', 1)';// add the description if any
var v=m.querySelector('.description');v&&(this.previewDescriptionEl.innerHTML=v.innerHTML);var w=this;setTimeout(function(){w.previewEl.classList.add('preview--open'),w.options.onExpand()},0),k(this.cloneImg,function(){imagesLoaded(w.originalImg,function(){w.previewEl.classList.add('preview--image-loaded'),w.originalImg.style.opacity=1,k(w.originalImg,function(){w.cloneImg.style.opacity=0,w.cloneImg.style.WebkitTransform='translate3d(0,0,0) scale3d(1,1,1)',w.cloneImg.style.transform='translate3d(0,0,0) scale3d(1,1,1)',w.isAnimating=!1})})})}// set the src of the original image element (large image)
// callback
// set the clone image
// hide original grid item
// after the clone animates..
},h.prototype._setOriginal=function(l){l||(this.originalImg=document.createElement('img'),this.originalImg.className='original',this.originalImg.style.opacity=0,this.originalImg.style.maxWidth='calc('+parseInt(100*Math.abs(this.options.imgPosition.x))+'vw - '+this.options.pagemargin+'px)',this.originalImg.style.maxHeight='calc('+parseInt(100*Math.abs(this.options.imgPosition.y))+'vh - '+this.options.pagemargin+'px)',this.originalImg.style.WebkitTransform='translate3d(0,0,0) scale3d(1,1,1)',this.originalImg.style.transform='translate3d(0,0,0) scale3d(1,1,1)',l='',this.previewEl.appendChild(this.originalImg)),this.originalImg.setAttribute('src',l)},h.prototype._setClone=function(l,m){l?(this.cloneImg.style.opacity=1,this.cloneImg.style.width=m.width+'px',this.cloneImg.style.height=m.height+'px',this.cloneImg.style.top=m.top+'px',this.cloneImg.style.left=m.left+'px'):(this.cloneImg=document.createElement('img'),this.cloneImg.className='clone',l='',this.cloneImg.style.opacity=0,this.previewEl.appendChild(this.cloneImg)),this.cloneImg.setAttribute('src',l)},h.prototype._closeItem=function(){if(this.isExpanded&&!this.isAnimating){this.isExpanded=!1,this.isAnimating=!0;// the grid item's image and its offset
var l=this.items[this.current],m=l.querySelector('img'),n=m.getBoundingClientRect(),o=this;this.previewEl.classList.remove('preview--open'),this.previewEl.classList.remove('preview--image-loaded'),this.options.onCloseItem(this,l),this.originalImg.classList.add('animate');// set the transform to the original/large image
var p=this._getWinSize(),q=n.left+m.offsetWidth/2-((0<this.options.imgPosition.x?1-Math.abs(this.options.imgPosition.x):Math.abs(this.options.imgPosition.x))*p.width+this.options.imgPosition.x*p.width/2),r=n.top+m.offsetHeight/2-((0<this.options.imgPosition.y?1-Math.abs(this.options.imgPosition.y):Math.abs(this.options.imgPosition.y))*p.height+this.options.imgPosition.y*p.height/2),s=m.offsetWidth/this.originalImg.offsetWidth;this.originalImg.style.WebkitTransform='translate3d('+q+'px, '+r+'px, 0) scale3d('+s+', '+s+', 1)',this.originalImg.style.transform='translate3d('+q+'px, '+r+'px, 0) scale3d('+s+', '+s+', 1)',k(this.originalImg,function(){o.previewDescriptionEl.innerHTML='',l.classList.remove('grid__item--current'),setTimeout(function(){o.originalImg.style.opacity=0},60),k(o.originalImg,function(){o.originalImg.classList.remove('animate'),o.originalImg.style.WebkitTransform='translate3d(0,0,0) scale3d(1,1,1)',o.originalImg.style.transform='translate3d(0,0,0) scale3d(1,1,1)',o.isAnimating=!1})})}// callback
// large image will animate back to the position of its grid's item
// once that's done..
},h.prototype._getWinSize=function(){return{width:document.documentElement.clientWidth,height:c.innerHeight}},c.GridFx=h})(window),function(){var c={transitions:Modernizr.csstransitions}// transition end event name
,d={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd',msTransition:'MSTransitionEnd',transition:'transitionend'}[Modernizr.prefixed('transition')],f=function(g,h){var i=function(j){if(c.transitions){if(j.target!=this)return;this.removeEventListener(d,i)}h&&'function'==typeof h&&h.call(this)};c.transitions?g.addEventListener(d,i):i()};new GridFx(document.querySelector('.grid'),{imgPosition:{x:1,y:-0.75},onOpenItem:function(g,h){var i={width:window.innerWidth,height:window.innerHeight};g.items.forEach(function(j){if(h!=j){var k=Math.floor(130*Math.random());j.style.WebkitTransition='opacity .5s '+k+'ms cubic-bezier(.7,0,.3,1), -webkit-transform .5s '+k+'ms cubic-bezier(.7,0,.3,1)',j.style.transition='opacity .5s '+k+'ms cubic-bezier(.7,0,.3,1), transform .5s '+k+'ms cubic-bezier(.7,0,.3,1)';var l=j.getBoundingClientRect(),m={width:j.offsetWidth,height:j.offsetHeight};j.style.WebkitTransform='translate3d('+(i.width/2-l.left-m.width/2)+'px,'+(i.height-l.top-m.height/2)+'px,0) scale3d(0,0,1)',j.style.transform='translate3d('+(i.width/2-l.left-m.width/2)+'px,'+(i.height-l.top-m.height/2)+'px,0) scale3d(0,0,1)',j.style.opacity=0}})},onCloseItem:function(g,h){g.items.forEach(function(i){h!=i&&(i.style.WebkitTransition='opacity .3s, -webkit-transform .3s',i.style.transition='opacity .3s, transform .3s',i.style.WebkitTransform='translate3d(0,0,0) scale3d(1,1,1)',i.style.transform='translate3d(0,0,0) scale3d(1,1,1)',i.style.opacity=1,f(i,function(){i.style.transition='none',i.style.WebkitTransform='none'}))})}})}();/**
 * main.js
 * http://www.codrops.com
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Copyright 2015, Codrops
 * http://www.codrops.com
 */
//# sourceMappingURL=image-grid-effects.js.map