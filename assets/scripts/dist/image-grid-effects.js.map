{"version":3,"sources":["../src/image-grid-effects.js"],"names":["window","throttle","fn","delay","allowSample","e","setTimeout","nextSibling","el","nodeType","extend","a","b","key","hasOwnProperty","GridFx","options","gridEl","items","slice","call","querySelectorAll","previewEl","isExpanded","isAnimating","closeCtrl","querySelector","previewDescriptionEl","_init","support","transitions","Modernizr","csstransitions","transEndEventName","prefixed","onEndTransition","callback","onEndCallbackFn","ev","target","removeEventListener","addEventListener","prototype","pagemargin","imgPosition","x","y","onInit","onResize","onOpenItem","onCloseItem","onExpand","self","imagesLoaded","classList","add","_initEvents","_setOriginal","_setClone","clickEvent","ontouchstart","forEach","item","touchend","preventDefault","_openItem","touchmove","manageTouch","_closeItem","gridImg","gridImgOffset","getBoundingClientRect","current","indexOf","getAttribute","src","width","offsetWidth","height","offsetHeight","left","top","win","_getWinSize","originalSizeArr","split","originalSize","dx","Math","abs","dy","z","min","cloneImg","style","WebkitTransform","transform","descriptionEl","innerHTML","originalImg","opacity","document","createElement","className","maxWidth","parseInt","maxHeight","appendChild","setAttribute","settings","gridItem","remove","documentElement","clientWidth","innerHeight"],"mappings":"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","file":"image-grid-effects.js","sourcesContent":["/* eslint-disable */\n\n/**\n * main.js\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n *\n * Copyright 2015, Codrops\n * http://www.codrops.com\n */;\n(function(window) {\n\n    'use strict';\n\n    var support = {\n        transitions: Modernizr.csstransitions\n    },\n    // transition end event name\n    transEndEventNames = {\n        'WebkitTransition': 'webkitTransitionEnd',\n        'MozTransition': 'transitionend',\n        'OTransition': 'oTransitionEnd',\n        'msTransition': 'MSTransitionEnd',\n        'transition': 'transitionend'\n    },\n    transEndEventName = transEndEventNames[Modernizr.prefixed('transition')],\n        onEndTransition = function(el, callback) {\n            var onEndCallbackFn = function(ev) {\n                if (support.transitions) {\n                    if (ev.target != this) return;\n                    this.removeEventListener(transEndEventName, onEndCallbackFn);\n                }\n                if (callback && typeof callback === 'function') {\n                    callback.call(this);\n                }\n            };\n            if (support.transitions) {\n                el.addEventListener(transEndEventName, onEndCallbackFn);\n            } else {\n                onEndCallbackFn();\n            }\n        };\n\n    /**\n     * some helper functions\n     */\n\n    function throttle(fn, delay) {\n        var allowSample = true;\n\n        return function(e) {\n            if (allowSample) {\n                allowSample = false;\n                setTimeout(function() {\n                    allowSample = true;\n                }, delay);\n                fn(e);\n            }\n        };\n    }\n\n    function nextSibling(el) {\n        var nextSibling = el.nextSibling;\n        while (nextSibling && nextSibling.nodeType != 1) {\n            nextSibling = nextSibling.nextSibling\n        }\n        return nextSibling;\n    }\n\n    function extend(a, b) {\n        for (var key in b) {\n            if (b.hasOwnProperty(key)) {\n                a[key] = b[key];\n            }\n        }\n        return a;\n    }\n\n    /**\n     * GridFx obj\n     */\n    function GridFx(el, options) {\n        this.gridEl = el;\n        this.options = extend({}, this.options);\n        extend(this.options, options);\n\n        this.items = [].slice.call(this.gridEl.querySelectorAll('.grid__item'));\n        this.previewEl = nextSibling(this.gridEl);\n        this.isExpanded = false;\n        this.isAnimating = false;\n        this.closeCtrl = this.previewEl.querySelector('button.action--close');\n        this.previewDescriptionEl = this.previewEl.querySelector('.description--preview');\n\n        this._init();\n    }\n\n    /**\n     * options\n     */\n    GridFx.prototype.options = {\n        pagemargin: 0,\n        // x and y can have values from 0 to 1 (percentage). If negative then it means the alignment is left and/or top rather than right and/or bottom\n        // so, as an example, if we want our large image to be positioned vertically on 25% of the screen and centered horizontally the values would be x:1,y:-0.25\n        imgPosition: {\n            x: 1,\n            y: 1\n        },\n        onInit: function(instance) {\n            return false;\n        },\n        onResize: function(instance) {\n            return false;\n        },\n        onOpenItem: function(instance, item) {\n            return false;\n        },\n        onCloseItem: function(instance, item) {\n            return false;\n        },\n        onExpand: function() {\n            return false;\n        }\n    }\n\n    GridFx.prototype._init = function() {\n        // callback\n        this.options.onInit(this);\n\n        var self = this;\n        // init masonry after all images are loaded\n        imagesLoaded(this.gridEl, function() {\n            // initialize masonry\n            // new Masonry(self.gridEl, {\n            //     itemSelector: '.grid__item',\n            //     isFitWidth: true\n            // });\n            // show grid after all images (thumbs) are loaded\n            self.gridEl.classList.add('grid--loaded');\n            // init/bind events\n            self._initEvents();\n            // create the large image and append it to the DOM\n            self._setOriginal();\n            // create the clone image and append it to the DOM\n            self._setClone();\n        });\n    };\n\n    /**\n     * initialize/bind events\n     */\n    GridFx.prototype._initEvents = function() {\n        var self = this,\n            clickEvent = (document.ontouchstart !== null ? 'click' : 'touchstart');\n\n        this.items.forEach(function(item) {\n            var touchend = function(ev) {\n                ev.preventDefault();\n                self._openItem(ev, item);\n                item.removeEventListener('touchend', touchend);\n            },\n            touchmove = function(ev) {\n                item.removeEventListener('touchend', touchend);\n            },\n            manageTouch = function() {\n                item.addEventListener('touchend', touchend);\n                item.addEventListener('touchmove', touchmove);\n            };\n\n            item.addEventListener(clickEvent, function(ev) {\n                if (clickEvent === 'click') {\n                    ev.preventDefault();\n                    self._openItem(ev, item);\n                } else {\n                    manageTouch();\n                }\n            });\n        });\n\n        // close expanded image\n        this.closeCtrl.addEventListener('click', function() {\n            self._closeItem();\n        });\n\n        window.addEventListener('resize', throttle(function(ev) {\n            // callback\n            self.options.onResize(self);\n        }, 10));\n    }\n\n    /**\n     * open a grid item\n     */\n    GridFx.prototype._openItem = function(ev, item) {\n        if (this.isAnimating || this.isExpanded) return;\n        this.isAnimating = true;\n        this.isExpanded = true;\n\n        // item's image\n        var gridImg = item.querySelector('img'),\n            gridImgOffset = gridImg.getBoundingClientRect();\n\n        // index of current item\n        this.current = this.items.indexOf(item);\n\n        // set the src of the original image element (large image)\n        this._setOriginal(item.querySelector('a').getAttribute('href'));\n\n        // callback\n        this.options.onOpenItem(this, item);\n\n        // set the clone image\n        this._setClone(gridImg.src, {\n            width: gridImg.offsetWidth,\n            height: gridImg.offsetHeight,\n            left: gridImgOffset.left,\n            top: gridImgOffset.top\n        });\n\n        // hide original grid item\n        item.classList.add('grid__item--current');\n\n        // calculate the transform value for the clone to animate to the full image view\n        var win = this._getWinSize(),\n            originalSizeArr = item.getAttribute('data-size').split('x'),\n            originalSize = {\n                width: originalSizeArr[0],\n                height: originalSizeArr[1]\n            },\n            dx = ((this.options.imgPosition.x > 0 ? 1 - Math.abs(this.options.imgPosition.x) : Math.abs(this.options.imgPosition.x)) * win.width + this.options.imgPosition.x * win.width / 2) - gridImgOffset.left - 0.5 * gridImg.offsetWidth,\n            dy = ((this.options.imgPosition.y > 0 ? 1 - Math.abs(this.options.imgPosition.y) : Math.abs(this.options.imgPosition.y)) * win.height + this.options.imgPosition.y * win.height / 2) - gridImgOffset.top - 0.5 * gridImg.offsetHeight,\n            z = Math.min(Math.min(win.width * Math.abs(this.options.imgPosition.x) - this.options.pagemargin, originalSize.width - this.options.pagemargin) / gridImg.offsetWidth, Math.min(win.height * Math.abs(this.options.imgPosition.y) - this.options.pagemargin, originalSize.height - this.options.pagemargin) / gridImg.offsetHeight);\n\n        // apply transform to the clone\n        this.cloneImg.style.WebkitTransform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n        this.cloneImg.style.transform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\n        // add the description if any\n        var descriptionEl = item.querySelector('.description');\n        if (descriptionEl) {\n            this.previewDescriptionEl.innerHTML = descriptionEl.innerHTML;\n        }\n\n        var self = this;\n        setTimeout(function() {\n            // controls the elements inside the expanded view\n            self.previewEl.classList.add('preview--open');\n            // callback\n            self.options.onExpand();\n        }, 0);\n\n        // after the clone animates..\n        onEndTransition(this.cloneImg, function() {\n            // when the original/large image is loaded..\n            imagesLoaded(self.originalImg, function() {\n                // close button just gets shown after the large image gets loaded\n                self.previewEl.classList.add('preview--image-loaded');\n                // animate the opacity to 1\n                self.originalImg.style.opacity = 1;\n                // and once that's done..\n                onEndTransition(self.originalImg, function() {\n                    // reset cloneImg\n                    self.cloneImg.style.opacity = 0;\n                    self.cloneImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n                    self.cloneImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n                    self.isAnimating = false;\n                });\n\n            });\n        });\n    };\n\n    /**\n     * create/set the original/large image element\n     */\n    GridFx.prototype._setOriginal = function(src) {\n        if (!src) {\n            this.originalImg = document.createElement('img');\n            this.originalImg.className = 'original';\n            this.originalImg.style.opacity = 0;\n            this.originalImg.style.maxWidth = 'calc(' + parseInt(Math.abs(this.options.imgPosition.x) * 100) + 'vw - ' + this.options.pagemargin + 'px)';\n            this.originalImg.style.maxHeight = 'calc(' + parseInt(Math.abs(this.options.imgPosition.y) * 100) + 'vh - ' + this.options.pagemargin + 'px)';\n            // need it because of firefox\n            this.originalImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n            this.originalImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n            src = '';\n            this.previewEl.appendChild(this.originalImg);\n        }\n\n        this.originalImg.setAttribute('src', src);\n    };\n\n    /**\n     * create/set the clone image element\n     */\n    GridFx.prototype._setClone = function(src, settings) {\n        if (!src) {\n            this.cloneImg = document.createElement('img');\n            this.cloneImg.className = 'clone';\n            src = '';\n            this.cloneImg.style.opacity = 0;\n            this.previewEl.appendChild(this.cloneImg);\n        } else {\n            this.cloneImg.style.opacity = 1;\n            // set top/left/width/height of grid item's image to the clone\n            this.cloneImg.style.width = settings.width + 'px';\n            this.cloneImg.style.height = settings.height + 'px';\n            this.cloneImg.style.top = settings.top + 'px';\n            this.cloneImg.style.left = settings.left + 'px';\n        }\n\n        this.cloneImg.setAttribute('src', src);\n    };\n\n    /**\n     * closes the original/large image view\n     */\n    GridFx.prototype._closeItem = function() {\n        if (!this.isExpanded || this.isAnimating) return;\n        this.isExpanded = false;\n        this.isAnimating = true;\n\n        // the grid item's image and its offset\n        var gridItem = this.items[this.current],\n            gridImg = gridItem.querySelector('img'),\n            gridImgOffset = gridImg.getBoundingClientRect(),\n            self = this;\n\n        this.previewEl.classList.remove('preview--open');\n        this.previewEl.classList.remove('preview--image-loaded');\n\n        // callback\n        this.options.onCloseItem(this, gridItem);\n\n        // large image will animate back to the position of its grid's item\n        this.originalImg.classList.add('animate');\n\n        // set the transform to the original/large image\n        var win = this._getWinSize(),\n            dx = gridImgOffset.left + gridImg.offsetWidth / 2 - ((this.options.imgPosition.x > 0 ? 1 - Math.abs(this.options.imgPosition.x) : Math.abs(this.options.imgPosition.x)) * win.width + this.options.imgPosition.x * win.width / 2),\n            dy = gridImgOffset.top + gridImg.offsetHeight / 2 - ((this.options.imgPosition.y > 0 ? 1 - Math.abs(this.options.imgPosition.y) : Math.abs(this.options.imgPosition.y)) * win.height + this.options.imgPosition.y * win.height / 2),\n            z = gridImg.offsetWidth / this.originalImg.offsetWidth;\n\n        this.originalImg.style.WebkitTransform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n        this.originalImg.style.transform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\n        // once that's done..\n        onEndTransition(this.originalImg, function() {\n            // clear description\n            self.previewDescriptionEl.innerHTML = '';\n\n            // show original grid item\n            gridItem.classList.remove('grid__item--current');\n\n            // fade out the original image\n            setTimeout(function() {\n                self.originalImg.style.opacity = 0;\n            }, 60);\n\n            // and after that\n            onEndTransition(self.originalImg, function() {\n                // reset original/large image\n                self.originalImg.classList.remove('animate');\n                self.originalImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n                self.originalImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n                self.isAnimating = false;\n            });\n        });\n    };\n\n    /**\n     * gets the window sizes\n     */\n    GridFx.prototype._getWinSize = function() {\n        return {\n            width: document.documentElement.clientWidth,\n            height: window.innerHeight\n        };\n    };\n\n    window.GridFx = GridFx;\n\n})(window);\n"]}